<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Capture UI with Fullscreen 3D Model</title>
<script type="module">
  import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.121.1/build/three.module.js";
  import { OBJLoader } from "https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/loaders/OBJLoader.js";
  import { MTLLoader } from "https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/loaders/MTLLoader.js";

  window.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById("model-container");

    // Настройка сцены, камеры и рендерера
    const camera = new THREE.PerspectiveCamera(10, window.innerWidth / window.innerHeight, 0.3, 1000);
    camera.position.z = 10;

    const scene = new THREE.Scene();
    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x1a152a, 0);
    container.appendChild(renderer.domElement);

    // 1. Загружаем материалы (MTL)
    const mtlLoader = new MTLLoader();
    mtlLoader.load(
      "models/anime.mtl", // Путь к MTL-файлу
      (materials) => {
        materials.preload(); // Предзагрузка материалов

        // 2. Загружаем OBJ с привязанными материалами
        const objLoader = new OBJLoader();
        objLoader.setMaterials(materials); // Привязываем материалы
        objLoader.load(
          "models/anime.obj", // Путь к OBJ-файлу
          (object) => {
            object.scale.set(1, 1.1, 1.5);
            object.position.set(0, -1.5, 4);
            scene.add(object);
            renderer.render(scene, camera);
          },
          (xhr) => console.log((xhr.loaded / xhr.total * 100) + '% загружено'),
          (error) => console.error("Ошибка загрузки OBJ:", error)
        );
      },
      (xhr) => console.log((xhr.loaded / xhr.total * 100) + '% MTL загружено'),
      (error) => console.error("Ошибка загрузки MTL:", error)
    );

    // Освещение (важно для текстур!)
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
    scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
    directionalLight.position.set(0, -1.5, 4);
    scene.add(directionalLight);

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.render(scene, camera);
    });
  });
</script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <style>
    body,
    html {
      margin: 0;
      height: 100%;
      background-color: rgb(231,231,231);
      overflow: hidden;
    }

    #model-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 0;
    }

    canvas {
      outline: none;
      user-select: none;
      max-height: 100vh;
      max-width: 100vw;
    }

    /* Gray translucent buttons with blur and transparency */
    .btn-blur {
      background-color: rgba(128, 128, 128, 0.3); /* gray with transparency */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 9999px; /* fully rounded */
      color: white;
      transition: background-color 0.3s ease;
      z-index: 10;
    }

    .btn-blur:hover,
    .btn-blur:focus {
      background-color: rgba(128, 128, 128, 0.5);
      outline: none;
    }

    input::placeholder {
      color: rgba(255 255 255 / 0.6);
    }

    /* Container for UI controls above the 3D model */
    .ui-container {
      position: relative;
      z-index: 10;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      height: 100vh;
      justify-content: space-between;
    }
  </style>
</head>
<body class="min-h-screen bg-[rgb(231,231,231)]">
  <div class="ui-container">
    <!-- Top bar -->
    <div class="flex justify-between items-center">
      <button aria-label="Menu" class="btn-blur text-3xl leading-none px-4 py-2">
        <i class="fas fa-bars"></i>
      </button>
      <button
        aria-label="Capture"
        class="btn-blur flex items-center gap-2 px-4 py-2 text-white text-sm font-semibold"
      >
        <i class="fas fa-qrcode text-lg"></i> Capture
      </button>
    </div>

    <!-- Bottom controls -->
    <div class="space-y-4">
      <div class="flex justify-between gap-4">
        <button
          aria-label="Video"
          class="btn-blur flex-1 py-3 flex justify-center items-center text-white text-xl"
        >
          <i class="fas fa-video"></i>
        </button>
        <button
          aria-label="Volume"
          class="btn-blur flex-1 py-3 flex justify-center items-center text-white text-xl"
        >
          <i class="fas fa-volume-up"></i>
        </button>
        <button
          aria-label="Microphone"
          class="btn-blur flex-1 py-3 flex justify-center items-center text-white text-xl"
        >
          <i class="fas fa-microphone"></i>
        </button>
      </div>
      <div class="flex justify-between items-center gap-4">
        <input
          type="text"
          placeholder="Ask Anything"
          class="flex-1 btn-blur py-3 px-4 text-white text-sm font-light outline-none rounded-full"
        />
        <button
          aria-label="Stop"
          class="flex items-center gap-2 bg-white text-black rounded-full py-3 px-6 text-base font-semibold"
        >
          <span class="w-4 h-4 bg-black inline-block rounded-sm"></span> Stop
        </button>
      </div>
    </div>
  </div>

  <!-- 3D Model container -->
  <div id="model-container"></div>
</body>
</html>
